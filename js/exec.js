//
//fades out pre-loader after page is ready
//
$(window).load(function()
{
    $("#spinner").fadeOut("slow");
    $(".pre-load").fadeOut("slow");
});

//
// determine if device is a mobile device or not
//
function isMobile()
{
    if(/iPad/i.test(navigator.userAgent) && $(window).width() > 980) {return false;}
    return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
}

$(document).ready(function()
{

    $(window).load(function()
    {
        if(!isMobile()) { $(".mainbody").css("margin-top", ($(".navbar").height() + 30)); }
        else
        {
            $(".mainbody").css("margin-top", $(".mobile-nav").height());
            $(".member").remove("br");
            $(".member").append("<br>");
        }
    });

    //+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
    //+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
    // Title card sizing based on content
    //+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
    //+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

    $(window).bind("resize load", function(){
        let y = $("#heading").height() + $("#intro").height();
        console.log(y);
        if(y>400)
        {
            $(".title").height(y+32);
        }
        else
        {
            $(".title").height(400);
        }
    });
    //-------------------------------------------------------------------------------------------------------------------------------------------------------------
    //-------------------------------------------------------------------------------------------------------------------------------------------------------------


    //+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
    //+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
    // Title fade on scroll code
    //+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
    //+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
    $(window).scroll(function()
    {
        if(!isMobile())
        {
            var top = $(window).scrollTop();
            $("#heading").css("opacity", 1 - top/200);
        }
    });
    //-------------------------------------------------------------------------------------------------------------------------------------------------------------
    //-------------------------------------------------------------------------------------------------------------------------------------------------------------


    //+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
    //+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
    // Exec info dialog behavior on resize
    //+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
    //+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
    $(window).bind("scroll resize load", function()
    {
        if(!isMobile())
        {
            horizontalOver = ($(window).width() < 580);
            verticalOver = ($(window).height() < 740);
            let x = window.pageXOffset || document.documentElement.scrollLeft || document.body.scrollLeft;
            let y = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop;
            let offsetX = -x + 50 + "px";
            let offsetY = -y + 50 + "px";
            if(horizontalOver) { $(".dialog").css({"left":offsetX, "margin":"auto 0"}); }
            if(!horizontalOver) { $(".dialog").css({"left":"0", "margin":"0 auto"}); }
            if(verticalOver) { $(".dialog").css({"top":offsetY, "margin":"0 auto"}); }
            if(!verticalOver) { $(".dialog").css({"top":"0", "margin":"auto 0"}); }
            if(verticalOver && horizontalOver) { $(".dialog").css("margin", "0"); }
            if(!verticalOver && !horizontalOver) { $(".dialog").css("margin", "auto"); }
        }
    });
    //-------------------------------------------------------------------------------------------------------------------------------------------------------------
    //-------------------------------------------------------------------------------------------------------------------------------------------------------------


    //+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
    //+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
    // Info dialog open and close
    //+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
    //+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
    let id = "";

    $(".member img").click(function()
    {
        isHorizontalOver = ($(window).width() < 580);
        isVerticalOver = ($(window).height() < 740);
        id = "#" + $(this).attr("id") + "-dialog";
        console.log(id);
        console.log("width: "+$(window).width());
        console.log("height: "+$(window).height());
        
        if(isHorizontalOver) { $(window).scrollLeft(0); }
        if(isVerticalOver) { $(window).scrollTop(0); }
        
        $(".overlay").css("display", "block");
        $(id).css("display", "block");
        $(id).addClass("transform-out");
    
        setTimeout(function(){ $(id).removeClass("transform-out"); }, 700);
    });

    $(".dialog button").click(function()
    {
        $(id).addClass("transform-in");
        setTimeout(function()
        {
            $(".dialog").css("display", "none");
            $(id).removeClass("transform-in");
        }, 400);

        $(".overlay").css("display", "none");
        //$("body").css("overflow", "auto");
    });

    $(".overlay").click(function()
    {
        $(id).addClass("transform-in");
        setTimeout(function()
        {
            $(".dialog").css("display", "none");
            $(id).removeClass("transform-in");
        }, 400);

        $(".overlay").css("display", "none");
        //$("body").css("overflow", "auto");
    });

    //-------------------------------------------------------------------------------------------------------------------------------------------------------------
    //-------------------------------------------------------------------------------------------------------------------------------------------------------------


    //+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
    //+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
    // Go to Top button code
    //+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
    //+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
    $("#toTop").click(function ()
    {
        $("html, body").animate({
            scrollTop: 0
        }, 600);
    });
    //-------------------------------------------------------------------------------------------------------------------------------------------------------------
    //-------------------------------------------------------------------------------------------------------------------------------------------------------------
});
